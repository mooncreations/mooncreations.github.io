<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Imposter Game</title>
    <style>
        body {
            margin: 0;
            text-align: center;
            background-color: black;
        }

        h1 {
            font-family: "Segoe UI";
            font-size: 25px;
            color: #ffffff;
            margin-top: 5%;
        }

        p {
            font-family: "Segoe UI";
            font-size: 20px;
            color: white;          
        }

        input {
            height: 15vh;
            font-size: 50px;
            width: 50vw;
            border-radius: 10px;
            padding: 10px;
            text-align: center;
        }

        #start {
            height: 10vh;
            font-size: 50px;
            width: 50vw;
            border-radius: 10px;
            padding: 10px;
            margin-top: 5%;
            text-align: center;
        }

        #game {
            display: none;
            margin-top: 5vh;
        }

        .obj {
            margin-top: 5vh;
            height: 10vh;
            width: 60vw;
            font-size: 40px;
            text-align: center;
            padding: 20px;
            padding-bottom: 20px;
            border-radius: 10px;
        }

        #reset {
            width: 90vw;
            height: 15vw;
            background-color: rgb(147, 147, 248);
            font-size: 40px;
            padding: 10px;
            border-radius: 10px;
        }

        img {
            height: 20vh;
        }

        select {
            margin-top: 2vh;
            height: 10vh;
            font-size: 5vw;
            width: 80vw;
            border-radius: 10px;
            padding: 10px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div id="home">
        <h1>CR Imposter Game!</h1> 
        <img src="./e.png" alt="CR Imposter Game">
        <p>Programmed by Mr. V</p>
        <input placeholder="Players" type="number" id="players">
        <input type="number" id="imposters" placeholder="Imposters">
        <select id="mode">
            <option value="card">Imposter gets a Card</option>
            <option value="imposter">Imposter gets Imposter</option>
        </select>
        <button id="start">Start</button>
    </div>
    <div id="game">
        <button id="reset">Start Game</button>
    </div>
    <script>
        const items = [
            "Skeletons", "Ice Spirit", "Fire Spirit", "Electro Spirit", "Bomber", "Bats",
            "Goblins", "Spear Goblins", "Archers", "Knight", "Minions", "Mini P.E.K.K.A",
            "Heal Spirit", "Witch", "Lava Hound", "Princess", "Executioner", "Barbarians",
            "Musketeer", "Baby Dragon", "Wizard", "Valkyrie", "Prince", "Hog Rider",
            "Giant", "Giant Skeleton", "P.E.K.K.A", "Royal Giant", "Three Musketeers",
            "Minion Horde", "Elite Barbarians", "Rascals", "Guards", "Bowler",
            "Mega Minion", "Flying Machine", "Dart Goblin", "Hunter", "Ice Golem",
            "Electro Wizard", "Dark Prince", "Bandit", "Night Witch", 
            "Skeleton Barrel", "Skeleton Dragons", "Battle Ram", "Firecracker",
            "Battle Healer", "Royal Hogs", "Wall Breakers", "Goblin Gang", "Goblin Barrel",
            "Goblin Cage", "Goblin Drill", "Goblin Giant", "Elixir Golem",
            "Fisherman", "Magic Archer", "Mega Knight", "Miner", "Lumberjack",
            "Ice Wizard", "Inferno Dragon", "Electro Dragon", "Sparky", "Graveyard",
            "Poison", "Fireball", "Freeze", "Lightning", "Rocket", "Earthquake",
            "Tornado", "Arrows", "Zap", "Giant Snowball", "The Log", "Royal Delivery",
            "Barbarian Barrel", "Clone", "Mirror", "Rage", "Goblin Curse", "Vines",
            "Void", "Rune Giant", "Little Prince", "Spirit Empress", "Mighty Miner",
            "Skeleton King", "Archer Queen", "Golden Knight", "Goblinstein", "Boss Bandit",
            "Phoenix", "Mother Witch", "Ram Rider", "Cannon", "Cannon Cart",
            "Bomb Tower", "Furnace", "Inferno Tower", "Mortar", "Tesla", "X-Bow",
            "Barbarian Hut", "Goblin Hut", "Elixir Collector", "Tombstone",
            "[Tower] Tower Princess", "[Tower] Cannoneer", "[Tower] Dagger Duchess", "[Tower] Royal Chef",
            "Suspicious Bush", "Electro Giant", "Zappies",
            "Goblin Demolisher", "Goblin Machine"
        ];

        var players = 0;
        var clicks = 0;
        var mode = "card";

        var start = document.querySelector("#start");
        var home = document.querySelector("#home");
        var game = document.querySelector("#game");
        var input = document.querySelector("#players");
        var imps = document.querySelector("#imposters");
        var play = document.querySelector("#reset");
        var sel = document.querySelector("#mode");

        function rand() {
            let m = items.length;
            return items[Math.floor(Math.random() * m)];
        }

        function roll() {
            var card = rand();
            var imposters = [];
            var cPlayers = [];
            var impAmnt = Number(imps.value);
            var out = null;
            mode = sel.value

            if (impAmnt >= players) {
                alert("Too Many Imposters!!");
                window.location.reload()
            }

            for (let i = 1; i <= players; i++) {
                cPlayers.push(i);
            }

            console.log(cPlayers);
            for (let i = 0; i < impAmnt; i++) {
                let chosen = cPlayers[Math.floor(Math.random() * cPlayers.length)];
                
                imposters.push(chosen);
                cPlayers.splice(cPlayers.indexOf(chosen), 1);

                console.log(chosen + " was chosen and is removed from the list: " + cPlayers);
            }

            console.log(imposters);

            for (let i = 1; i <= players; i++) {
                if (!imposters.includes(i)) {
                    out = card;
                } else {
                    if (mode == "imposter") {
                        out = "Imposter";
                    } else {
                        out = rand();
                    }
                }

                let b = document.createElement("button");
                game.appendChild(b);
                b.className = "obj";
                b.setAttribute("val", out);
                b.innerHTML = "Player " + (i);
                b.onclick = () => {
                    alert(b.getAttribute("val"));
                    b.disabled = true;
                    clicks += 1;
                }
            }
        }

        play.addEventListener("click", () => {
            if (players == clicks) {
                alert("Player " + (Math.floor(Math.random() * players) + 1) + " will start the game");
                window.location.reload();
            } else {
                alert("Every player has to view their card");
            }
        });

        start.addEventListener("click", () => {
            players = Number(input.value);
            
            if (players <= 2) {
                alert("NEED MORE PLAYERS!!!");
            } else {
                home.style.display = "none";
                game.style.display = "block";

                roll();
            }
        });
    </script>
</body>

</html>
